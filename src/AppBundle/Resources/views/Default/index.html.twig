{% extends "::base.html.twig" %}

{% block body %}
    <div class="container">
        <h1>List of posts</h1>

        <a href="{{ path("post_create") }}">Create a post</a>

        <div>
            {% for post in posts %}
                <div>
                    <h3>
                        <a href="{{ path('post', {id: post.id}) }}">{{ post.title }}</a>
                        <br>
                        <small>Posted at {{ post.postedAt|date }}</small>
                    </h3>

                    <p>
                        {{ post.content|nl2br }}
                    </p>

                    {% if post.postType == "author" %}
                        <p>
                            Author: {{ post.authorPostDetails.authorName }}
                        </p>

                        <p>
                            Post url: <a href="{{ post.authorPostDetails.url }}">{{ post.authorPostDetails.url }}</a>
                        </p>
                    {% else %}
                        <div>
                            {% for tag in post.tags %}
                                <span class="label label-primary">{{ tag.name }}</span>
                                &ensp;
                            {% endfor %}
                        </div>
                    {% endif %}

                    <a href="{{ path("post", {id: post.id}) }}">Edit</a>

                    <hr>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
